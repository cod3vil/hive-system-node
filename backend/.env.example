# ============================================================
# 蜂巢套利系统 - 环境变量配置
# ============================================================

# ── 蜂巢节点信息 ──
# 节点名称 (用于在中央服务器中标识本节点)
HIVE_NODE_NAME=hive-node-1
# 节点公网 IP (留空则自动检测)
HIVE_NODE_IP=
# 节点备注 (例如: 香港服务器, Binance+OKX 跨市套利)
HIVE_NODE_REMARK=

# ── 蜂巢中央服务器 ──
# 中央服务器 WebSocket 地址 (留空则不启用通讯蜂)
# 格式: ws://server-ip:9000/ws/node
HIVE_SERVER_URL=

# ── 应用基础配置 ──
# 应用名称
APP_NAME=hive-system
# 运行环境: development / production
ENVIRONMENT=development
# 日志级别: DEBUG / INFO / WARNING / ERROR
LOG_LEVEL=INFO

# ── 运行模式 ──
# testnet    = 连接测试网，真实下单（开发调试用）
# simulation = 连接主网读真实行情，模拟下单不花真钱（策略验证用）
# mainnet    = 连接主网，真实下单（正式交易）
RUNNING_MODE=simulation

# ── Binance 交易所配置 ──
# API 密钥 (在 Binance 账户 → API 管理 中创建)
BINANCE_API_KEY=
# API 密钥对应的 Secret
BINANCE_API_SECRET=

# ── OKX 交易所配置 (跨市套利时需要) ──
# API 密钥 (在 OKX 账户 → API 中创建)
OKX_API_KEY=
# API 密钥对应的 Secret
OKX_API_SECRET=
# API 口令 (创建 API 时设置的 passphrase)
OKX_PASSPHRASE=

# ── 交易对配置 ──
# 可选配置，留空则侦查蜂会扫描全市场寻找套利机会
# 如果指定交易对，侦查蜂只扫描这些交易对 (适合测试或限制范围)
# 格式: BTC/USDT,ETH/USDT (逗号分隔)
# 建议: 生产环境留空以获得最大机会覆盖
ENABLED_SYMBOLS=

# ── Redis 配置 ──
# Redis 服务器地址
REDIS_HOST=localhost
# Redis 端口
REDIS_PORT=6379
# Redis 数据库编号 (0-15)
REDIS_DB=0
# Redis 密码 (留空则不使用密码验证)
REDIS_PASSWORD=
# Redis 最大连接数
REDIS_MAX_CONNECTIONS=10

# ── PostgreSQL 配置 ──
# PostgreSQL 服务器地址
POSTGRES_HOST=192.168.2.100
# PostgreSQL 端口
POSTGRES_PORT=5432
# 数据库名称
POSTGRES_DATABASE=hive_system
# 数据库用户名
POSTGRES_USER=postgres
# 数据库密码
POSTGRES_PASSWORD=
# 最小连接池数量
POSTGRES_MIN_CONNECTIONS=2
# 最大连接池数量
POSTGRES_MAX_CONNECTIONS=10

# ── WebSocket 配置 ──
# WebSocket 监听地址 (0.0.0.0 = 所有网卡)
WEBSOCKET_HOST=0.0.0.0
# WebSocket 端口
WEBSOCKET_PORT=8000


# ── Telegram 通知 ──
# 通过 @BotFather 创建 Bot 获取 token
# 将 Bot 加入群组后，通过 @userinfobot 或 API 获取 chat_id
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# ── 飞书通知 ──
# 在飞书群聊 → 设置 → 群机器人 → 添加自定义机器人，复制 webhook 地址
FEISHU_WEBHOOK_URL=
# 签名校验密钥 (可选, 开启签名校验后填入)
FEISHU_WEBHOOK_SECRET=

#====================================================================

# ── 交易所选择 ──
# 启用的交易所 (逗号分隔)
# 支持: binance, okx
# 示例: binance,okx (启用两个交易所用于跨市套利)
# 示例: binance (仅启用 Binance 用于现货-合约套利)
ENABLED_EXCHANGES=binance,okx

# ── 策略开关 ──
# 现货-合约套利 (Cash & Carry): true / false
ENABLE_CASH_CARRY=true
# 跨市套利 (Cross-Exchange Arbitrage): 需要至少启用 2 个交易所
ENABLE_CROSS_EXCHANGE=true

# ── 交易准入门槛 ──
# 最低 24 小时交易量 (USD, 低于此值的交易对不参与)
MIN_24H_VOLUME_USD=10000000
# 最小订单簿深度倍数 (相对于仓位大小)
MIN_ORDER_BOOK_DEPTH_MULTIPLIER=10

# ── 压力测试 ──
# 压力测试最小波动幅度 (20% = 0.20)
STRESS_TEST_MIN_MOVE_PCT=0.20

# ── 侦查蜂配置 ──
# 侦查蜂并发数量 (将市场列表分片并行扫描, 建议 3-10)
SCOUT_MAX_WORKERS=10

# ── 工蜂并发配置 ──
# 工蜂最大并发数（同时执行的交易上限）
MAX_CONCURRENT_WORKERS=10

# ── 跨市套利配置 ──
# 最小价差百分比 (触发开仓, 0.3% = 0.003)
CROSS_EXCHANGE_MIN_SPREAD_PCT=0.003
# 平仓价差百分比 (触发平仓, 0.1% = 0.001)
CROSS_EXCHANGE_CLOSE_SPREAD_PCT=0.001
# 最大持仓时间 (小时)
CROSS_EXCHANGE_MAX_HOLDING_HOURS=24
# 跨市套利最大资金占比 (30% = 0.30)
CROSS_EXCHANGE_MAX_EXPOSURE_PCT=0.30

# ── 资金费对账 ──
# 资金费对账超时时间 (小时, 超时标记为异常并触发减仓)
FUNDING_RECONCILIATION_TIMEOUT_HOURS=16


# ── 网络弹性 ──
# API 请求重试次数
API_RETRY_ATTEMPTS=3
# 网络软超时 (秒, 超时后重试)
NETWORK_SOFT_TIMEOUT_SECONDS=30
# 网络硬超时 (秒, 超时后触发紧急处理)
NETWORK_HARD_TIMEOUT_SECONDS=120

# ── 手续费配置 ──
# 费率版本: v1 / v2 (不同 VIP 等级)
FEE_VERSION=v1
# 现货 Maker 手续费 (0.1% = 0.001)
SPOT_MAKER_FEE=0.001
# 现货 Taker 手续费 (0.1% = 0.001)
SPOT_TAKER_FEE=0.001
# 合约 Maker 手续费 (0.02% = 0.0002)
PERP_MAKER_FEE=0.0002
# 合约 Taker 手续费 (0.05% = 0.0005)
PERP_TAKER_FEE=0.0005

# ── 资金限制 ──
# 单仓最大占比 (15% = 0.15)
MAX_SINGLE_POSITION_PCT=0.15
# 总敞口最大占比 (50% = 0.50)
MAX_TOTAL_EXPOSURE_PCT=0.50
# 单资产类别最大敞口占比 (30% = 0.30)
MAX_ASSET_CLASS_EXPOSURE_PCT=0.30
# 最低安全储备金占比 (50% = 0.50)
MIN_SAFETY_RESERVE_PCT=0.50

# ── 风控限制 ──
# 单日最大亏损比例 (3% = 0.03, 触发软暂停)
MAX_DAILY_LOSS_PCT=0.03
# 最大回撤比例 (6% = 0.06, 触发硬停止)
MAX_DRAWDOWN_PCT=0.06
# 最小清算距离 (30% = 0.30, 低于此值触发减仓)
MIN_LIQUIDATION_DISTANCE_PCT=0.30

# ── 杠杆设置 ──
# 默认杠杆倍数
DEFAULT_LEVERAGE=1.5
# 最大杠杆倍数
MAX_LEVERAGE=2.0

# ── 资金费率筛选条件 ──
# 最低年化资金费率 (15% = 0.15, 低于此值不开仓)
MIN_ANNUALIZED_FUNDING_PCT=0.15
# 最高年化资金费率 (80% = 0.80, 高于此值视为异常)
MAX_ANNUALIZED_FUNDING_PCT=0.80
# 最低费率稳定性评分 (0-1, 越高越稳定)
MIN_FUNDING_STABILITY_SCORE=0.7
# 最大拥挤度指标 (越大越拥挤, 超过此值不开仓)
MAX_CROWDING_INDICATOR=3.0

# ── 执行参数 ──
# 最大滑点容忍度 (0.05% = 0.0005)
MAX_SLIPPAGE_PCT=0.0005
# Delta 偏差容忍度 (0.1% = 0.001, 超过触发再平衡)
DELTA_TOLERANCE_PCT=0.001
# 再平衡冷却时间 (秒)
REBALANCE_COOLDOWN_SECONDS=60

# ── 监控频率 ──
# 持仓扫描间隔 (秒)
POSITION_SCAN_INTERVAL_SECONDS=5
# 资金费率更新/侦查蜂扫描间隔 (秒)
FUNDING_UPDATE_INTERVAL_SECONDS=10